{"ast":null,"code":"import { message } from 'antd';\n\nvar request = function request(url, config) {\n  return fetch(url, config).then(function (res) {\n    if (!res.ok) {\n      // 服务器异常返回\n      throw Error('');\n    }\n\n    return res.json();\n  }).then(function (resJson) {\n    if (!resJson.success) {\n      // 项目内部认为的错误\n      throw Error('');\n    } else {\n      return resJson;\n    }\n  }).catch(function () {\n    // 公共错误处理\n    message.error('内部错误，请重新登录');\n  });\n}; // GET请求\n\n\nexport var get = function get(url) {\n  return request(url, {\n    method: 'GET'\n  });\n}; // POST请求\n\nexport var post = function post(url, data) {\n  return request(url, {\n    body: JSON.stringify(data),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'POST'\n  });\n};","map":{"version":3,"sources":["/Users/heqinglin8/MyWork/react/react-easy-start/src/util/fetch.js"],"names":["message","request","url","config","fetch","then","res","ok","Error","json","resJson","success","catch","error","get","method","post","data","body","JSON","stringify","headers"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAMC,MAAN,EAAiB;AAC/B,SAAOC,KAAK,CAACF,GAAD,EAAMC,MAAN,CAAL,CAAmBE,IAAnB,CAAwB,UAACC,GAAD,EAAS;AACtC,QAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX;AACA,YAAMC,KAAK,CAAC,EAAD,CAAX;AACD;;AAED,WAAOF,GAAG,CAACG,IAAJ,EAAP;AACD,GAPM,EAOJJ,IAPI,CAOC,UAACK,OAAD,EAAa;AACnB,QAAI,CAACA,OAAO,CAACC,OAAb,EAAsB;AACpB;AACA,YAAMH,KAAK,CAAC,EAAD,CAAX;AACD,KAHD,MAGO;AACL,aAAOE,OAAP;AACD;AACF,GAdM,EAcJE,KAdI,CAcE,YAAM;AACb;AACAZ,IAAAA,OAAO,CAACa,KAAR,CAAc,YAAd;AACD,GAjBM,CAAP;AAkBD,CAnBD,C,CAqBA;;;AACA,OAAO,IAAMC,GAAG,GAAG,SAANA,GAAM,CAACZ,GAAD,EAAS;AAC1B,SAAOD,OAAO,CAACC,GAAD,EAAM;AAACa,IAAAA,MAAM,EAAE;AAAT,GAAN,CAAd;AACD,CAFM,C,CAIP;;AACA,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACd,GAAD,EAAMe,IAAN,EAAe;AACjC,SAAOhB,OAAO,CAACC,GAAD,EAAM;AAClBgB,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,IAAf,CADY;AAElBI,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFS;AAKlBN,IAAAA,MAAM,EAAE;AALU,GAAN,CAAd;AAOD,CARM","sourcesContent":["import { message } from 'antd';\n\nconst request = (url, config) => {\n  return fetch(url, config).then((res) => {\n    if (!res.ok) {\n      // 服务器异常返回\n      throw Error('');\n    }\n\n    return res.json();\n  }).then((resJson) => {\n    if (!resJson.success) {\n      // 项目内部认为的错误\n      throw Error('');\n    } else {\n      return resJson;\n    }\n  }).catch(() => {\n    // 公共错误处理\n    message.error('内部错误，请重新登录');\n  });\n};\n\n// GET请求\nexport const get = (url) => {\n  return request(url, {method: 'GET'});\n};\n\n// POST请求\nexport const post = (url, data) => {\n  return request(url, {\n    body: JSON.stringify(data),\n    headers: {\n      'content-type': 'application/json'\n    },\n    method: 'POST'\n  });\n};"]},"metadata":{},"sourceType":"module"}